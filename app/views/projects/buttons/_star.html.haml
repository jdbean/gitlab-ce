- if current_user
  .count-badge.d-inline-flex.align-item-stretch.append-right-8
    %span.star-count.count-badge-count.d-flex.align-items-center
      = @project.star_count
    %button.count-badge-button.btn.btn-default.d-flex.align-items-center.star-btn.toggle-star{ type: "button", data: { endpoint: toggle_star_project_path(@project, :json) } }
      - if current_user.starred?(@project)
        = sprite_icon('star', { css_class: 'icon' })
        %span.starred= _('Unstar')
      - else
        = sprite_icon('star-o', { css_class: 'icon' })
        %span= s_('StarProject|Star')

- else
  .count-badge.d-inline-flex.align-item-stretch.append-right-8
    %span.star-count.count-badge-count.d-flex.align-items-center
      = @project.star_count
    = link_to new_user_session_path, class: 'btn btn-default has-tooltip count-badge-button d-flex align-items-center star-btn', title: _('You must sign in to star a project') do
      = sprite_icon('star-o', { css_class: 'icon' })
      %span= s_('StarProject|Star')
